/**
 * @license
 * The MIT License (MIT)
 * Copyright (c) 2016 SERPs.com
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,

/*! scroll-depth-tracker.js by SERPs.com v1.0.0 */
!function t(e,n,i){function o(c,a){if(!n[c]){if(!e[c]){var l="function"==typeof require&&require;if(!a&&l)return l(c,!0);if(r)return r(c,!0);var s=new Error("Cannot find module '"+c+"'");throw s.code="MODULE_NOT_FOUND",s}var d=n[c]={exports:{}};e[c][0].call(d.exports,function(t){var n=e[c][1][t];return o(n?n:t)},d,d.exports,t,e,n,i)}return n[c].exports}for(var r="function"==typeof require&&require,c=0;c<i.length;c++)o(i[c]);return o}({1:[function(t,e,n){e.exports={DEV_ID:"SERPYSERPS"}},{}],2:[function(t,e,n){e.exports={action:"Pageview End",beacon:!0,category:"Page",debug:!1,delay:!0,labelNoScroll:"Did Not Scroll",labelScroll:"Did Scroll",sampleRate:100,scrollThreshold:10,setPage:!0,timeout:300,timeThreshold:15,metric:null}},{}],3:[function(t,e,n){var i=t("./constants"),o=t("./utilities");(window.gaDevIds=window.gaDevIds||[]).push(i.DEV_ID),e.exports=function(t,e){var n=window.GoogleAnalyticsObject||"ga";window[n]=window[n]||function(){(window[n].q=window[n].q||[]).push(arguments)},window[n]("provide",t,e),window.gaplugins=window.gaplugins||{},window.gaplugins[o.capitalize(t)]=e}},{"./constants":1,"./utilities":4}],4:[function(t,e,n){var i={toArray:function(t){return Array.prototype.slice.call(t)},ready:function(t){"loading"!=document.readyState?t():document.addEventListener?document.addEventListener("DOMContentLoaded",t):document.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&t()})},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},extend:function(){function t(t,e){var n;for(n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t}var e,n=i.toArray(arguments),o={};for(e in n)n[e]=t(o,n[e]);return o},event:function(t,e){var n=!1;return!t.addEventListener&&t.attachEvent&&(n=!0),function(i){return function(o,r,c){if(e=c||e,!o.call)throw Error("Callback is not a function");var a=function(){o.call(e||t,i,r)};return n?t.attachEvent("on"+i,a):t.addEventListener(i,a,!1),function(){n?t.detachEvent(i,a):t.removeEventListener(i,a,!1)}}}}};e.exports=i},{}],5:[function(t,e,n){function i(t,e){var n=this;this.tracker=t,this.config=o.extend(e,r),this.debug(this.config),this.hasScrolled=!1,this.everScrolled=!1,this.tracker.set("useBeacon",this.config.beacon),this.reach=0,this.initialReach=0,this.startTime=1*new Date,o.ready(function(){n.initialReach=n.percent(n.depth(),n.pageHeight()),n.config.setPage&&n.tracker.set("page",window.location.pathname),n.isMobile()&&document.visibilityState?(o.event(document,n)("visibilitychange")(n.onVisibilityChange),o.event(window,n)("pagehide")(n.onVisibilityChange)):o.event(window,n)("beforeunload")(n.onUnload),o.event(window)("scroll")(function(){n.everScrolled=!0,n.hasScrolled=!0});var t=function(){n.hasScrolled&&(n.hasScrolled=!1,n.onScroll()),setTimeout(t,n.config.sampleRate)};setTimeout(t,n.config.sampleRate)})}var o=t("./utilities"),r=t("./defaults"),c=t("./provide");i.prototype.isMobile=function(){return window.navigator.userAgent.match(/Mobi|Touch|Opera\ Mini|Android/)},i.prototype.debug=function(){this.config.debug&&console.log(o.toArray(arguments))},i.prototype.depth=function(){return(window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0)+(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)},i.prototype.percent=function(t,e){return Math.floor(100*t/e)},i.prototype.onScroll=function(){var t=this.percent(this.depth(),this.pageHeight());t>this.reach&&(t>100?this.reach=100:this.reach=t),this.config.metric&&this.config.metric.toFixed&&this.tracker.set("metric"+this.config.metric,this.reach),this.debug("on scroll: reach",this.reach)},i.prototype.pageHeight=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},i.prototype.onUnload=function(){var t=this,e=!0,n=!1;(1*new Date-this.startTime>1e3*this.config.timeThreshold||this.reach>this.initialReach+this.config.scrollThreshold)&&(e=!1);var i={eventCategory:this.config.category,eventAction:this.config.action,eventLabel:this.everScrolled?this.config.labelScroll:this.config.labelNoScroll,eventValue:this.reach,nonInteraction:e,hitCallback:function(){n=!0,t.debug("hit sent!")}};if(this.debug(i),this.tracker.send("event",i),this.config.timeout&&!window.navigator.sendBeacon){var o=new Date,r=0;do r=new Date-o;while(r<this.config.timeout&&!n);this.debug("close page")}},i.prototype.onVisibilityChange=function(t){"pagehide"===t?this.onUnload():"visibilitychange"===t&&"hidden"==document.visibilityState&&this.onUnload()},c("scrollDepthTracker",i)},{"./defaults":2,"./provide":3,"./utilities":4}]},{},[5]);
