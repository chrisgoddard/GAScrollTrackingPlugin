/**
 * @license
 * The MIT License (MIT)
 * Copyright (c) 2016 SERPs.com
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,

/*! scroll-depth-tracker.js by SERPs.com v1.0.0 */
!function t(e,i,n){function o(c,a){if(!i[c]){if(!e[c]){var s="function"==typeof require&&require;if(!a&&s)return s(c,!0);if(r)return r(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[c]={exports:{}};e[c][0].call(u.exports,function(t){var i=e[c][1][t];return o(i?i:t)},u,u.exports,t,e,i,n)}return i[c].exports}for(var r="function"==typeof require&&require,c=0;c<n.length;c++)o(n[c]);return o}({1:[function(t,e,i){e.exports={DEV_ID:"SERPS"}},{}],2:[function(t,e,i){e.exports={action:"Pageview End",beacon:!0,category:"Page",debug:!1,delay:!0,labelNoScroll:"Did Not Scroll",labelScroll:"Did Scroll",sampleRate:100,scrollThreshold:10,setPage:!0,timeout:300,timeThreshold:15,metric:null,maxTimeOnPage:30}},{}],3:[function(t,e,i){var n=(t("./constants"),t("./utilities"));e.exports=function(t,e){var i=window.GoogleAnalyticsObject||"ga";window[i]=window[i]||function(){(window[i].q=window[i].q||[]).push(arguments)},window[i]("provide",t,e),window.gaplugins=window.gaplugins||{},window.gaplugins[n.capitalize(t)]=e}},{"./constants":1,"./utilities":4}],4:[function(t,e,i){var n={toArray:function(t){return Array.prototype.slice.call(t)},ready:function(t){"loading"!=document.readyState?t():document.addEventListener?document.addEventListener("DOMContentLoaded",t):document.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&t()})},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},extend:function(){function t(t,e){var i;for(i in e)t.hasOwnProperty(i)||(t[i]=e[i]);return t}var e,i=n.toArray(arguments),o={};for(e in i)i[e]=t(o,i[e]);return o},event:function(t,e){var i=!1;return!t.addEventListener&&t.attachEvent&&(i=!0),function(n){return function(o,r,c){if(e=c||e,!o.call)throw Error("Callback is not a function");var a=function(){o.call(e||t,n,r)};return i?t.attachEvent("on"+n,a):t.addEventListener(n,a,!1),function(){i?t.detachEvent("on"+n,a):t.removeEventListener(n,a,!1)}}}}};e.exports=n},{}],5:[function(t,e,i){function n(t,e){var i=this;this.tracker=t,this.autoHitSent=!1,this.hitCount=1,this.config=o.extend(e,r),this.debug(this.config),this.hasScrolled=!1,this.everScrolled=!1,this.reach=0,this.initialReach=0,this.startTime=1*new Date,o.ready(function(){o.event(document)("click")(function(){document.innerHTML="click!"+document.innerHTML}),i.initialReach=i.percent(i.depth(),i.pageHeight()),i.config.setPage&&(i.config.setPage.big?i.tracker.set("page",i.config.setPage):i.tracker.set("page",window.location.pathname)),i.debug("is mobile?",i.isMobile()),i.isMobile()&&document.visibilityState?(o.event(document,i)("visibilitychange")(i.onVisibilityChange),o.event(window,i)("pagehide")(i.onVisibilityChange)):o.event(window,i)("beforeunload")(i.onUnload),o.event(window)("scroll")(function(){i.everScrolled=!0,i.hasScrolled=!0});var t=function(){i.hasScrolled&&(i.hasScrolled=!1,i.onScroll()),setTimeout(t,i.config.sampleRate)};setTimeout(t,i.config.sampleRate);var e=function(){i.checkTimeout(),setTimeout(e,5e3)};setTimeout(e,5e3)})}var o=t("./utilities"),r=t("./defaults"),c=t("./provide");n.prototype.isMobile=function(){return window.navigator.userAgent.match(/Mobi|Touch|Opera\ Mini|Android/)},n.prototype.debug=function(){this.config.debug&&console.log(o.toArray(arguments))},n.prototype.depth=function(){return(window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop||0)+(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)},n.prototype.percent=function(t,e){return Math.floor(100*t/e)},n.prototype.checkTimeout=function(){1*new Date-this.startTime>60*(this.config.maxTimeOnPage-.5)*1e3&&!this.autoHitSent&&(this.autoHitSent=!0,this.onUnload())},n.prototype.onScroll=function(){var t=this.percent(this.depth(),this.pageHeight());t>this.reach&&(t>100?this.reach=100:this.reach=t),this.config.metric&&this.config.metric.toFixed&&this.tracker.set("metric"+this.config.metric,this.reach),this.debug("on scroll: reach",this.reach)},n.prototype.pageHeight=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},n.prototype.onUnload=function(){var t=this;if(!(1*new Date-this.startTime>60*this.config.maxTimeOnPage*1e3)){var e=!0,i=!1;(1*new Date-this.startTime>1e3*this.config.timeThreshold||this.reach>this.initialReach+this.config.scrollThreshold)&&(e=!1);var n=this.config.action;this.hitCount>1&&(n=n+" ("+this.hitCount+")");var o={eventCategory:this.config.category,eventAction:n,eventLabel:this.everScrolled?this.config.labelScroll:this.config.labelNoScroll,eventValue:this.reach,nonInteraction:e,hitCallback:function(){i=!0,t.debug("hit sent!")}};if(this.debug(o),this.tracker.send("event",o),this.hitCount++,this.config.timeout&&!window.navigator.sendBeacon){this.debug("no beacon support: using timeout fallback");var r=new Date,c=0;do c=new Date-r;while(c<this.config.timeout&&!i);this.debug("close page")}}},n.prototype.onVisibilityChange=function(t){"pagehide"===t?this.onUnload():"visibilitychange"===t&&"hidden"==document.visibilityState&&this.onUnload()},c("scrollDepthTracker",n)},{"./defaults":2,"./provide":3,"./utilities":4}]},{},[5]);